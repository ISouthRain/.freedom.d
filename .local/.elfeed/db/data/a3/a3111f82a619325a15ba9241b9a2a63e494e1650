<blockquote>
  <p>[海报] 稀土掘金正在面向全国举办<a href="https://juejin.cn/challenge/1?utm_source=ryf">"首届编程挑战赛"</a>，这是展示自己作品的好机会，详情见文后。</p>
</blockquote>

        <p>小游戏<a href="https://baike.baidu.com/item/%E7%BE%8A%E4%BA%86%E4%B8%AA%E7%BE%8A/61983244">《羊了个羊》</a>最近非常火爆，引发了全民关注，抖音和微博都有几十亿的查看量。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101202.webp" alt="" title="" /></p>

<p>它的开发难度，其实一点不高，主要游戏逻辑都在前端，用的是普通的网页开发技术。如此简单的实现，却取得了这样巨大的反响，堪称奇迹。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101203.webp" alt="" title="" /></p>

<p>本文就介绍这个游戏怎么实现。只用 HTML + CSS + JS 做出一个简单版本，根本不需要后端。</p>

<p>最后的成品会放到"码上掘金" <a href="https://code.juejin.cn/">code.juejin.cn</a>，那是一个网页的代码开发环境，可以分享运行结果，跟国外的 CodePen 差不多。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022102008.webp" alt="" title="" /></p>

<p>对于不了解的读者，我先简单说一下，《羊了个羊》是怎么回事。</p>

<p>本质上，它就是传统的"消消乐"游戏（下图），同种花色的方块连到一起，可以消除，消除所有方块，就过关了。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101205.webp" alt="" title="" /></p>

<p>《羊了个羊》在形式上借鉴了国外的《消麻将》游戏（下图），采用堆叠式消除。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101206.webp" alt="" title="" /></p>

<p>不同之处在于，它有一个槽位栏，存放取下的卡片（下图）。只要槽位栏里面，连续三张卡片花色相同，就能消除，也就是所谓的"三消"。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101207.webp" alt="" title="" /></p>

<p>你仔细一想，网页实现的核心逻辑，其实只有两步。</p>

<p>第一步，网页划出一个区域，将所有卡片在这个区域堆成四层。每一层的卡片位置和花色分布，可以用随机数控制。</p>

<p>第二步，每一层的没有被遮挡的卡片可以移动。它们只要被点击，就从卡片区移动到槽位栏。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101208.webp" alt="" title="" /></p>

<p>那么，下面就来实现这两步。我原想自己写，但在 GitHub 搜了一下"羊了个羊"，返回了近两百个结果，什么样的代码都有。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101209.webp" alt="" title="" /></p>

<p>他们实现得比我完善，效果更好，所以我选了一个仓库 <a href="https://github.com/chenxch/xlegex">chenxch/xlegex</a>，就用他的代码演示。</p>

<p>这个仓库使用 vue3 + TypeScript，源码加起来不到1000行。核心逻辑就是上面的两点，下面介绍一些关键的实现细节。</p>

<p>首先，每张卡片是一个实例对象，TypeScript 类型描述如下。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101210.webp" alt="" title="" /></p>

<p>从上图看到，每张卡片有如下属性。</p>

<blockquote>
  <ul>
<li><code>id</code>：卡片编号。</li>
<li><code>type</code>：卡片种类，相同种类的卡片可消除。</li>
<li><code>state</code>：卡片状态，是否已经点击或已经消除。</li>
<li><code>zIndex</code>：卡片在哪一层。</li>
<li><code>index</code>：该层的卡片编号。</li>
<li><code>row</code>：卡片所在的行。</li>
<li><code>column</code>：卡片所在的列。</li>
<li><code>top</code>：卡片距离堆叠区左上角的垂直距离。</li>
<li><code>left</code>：卡片距离堆叠区左上角的水平距离。</li>
</ul>
</blockquote>

<p>熟悉 CSS 的同学，看到里面的<code>zIndex</code>、<code>top</code>、<code>left</code>这些属性名，可能已经想到了，作者使用"绝对定位 + zIndex"实现卡片的定位。</p>

<p>定位逻辑就在卡片组件的代码里面，只有几行。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101211.webp" alt="" title="" /></p>

<p>上面代码中，红框部分就是定位逻辑，设置每张卡片的坐标，以及在第几层。</p>

<p>注意，上一层卡片的顶点要落在下一层卡片的中心点，从而可以露出下面的图案。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101212.webp" alt="" title="" /></p>

<p>上面示意图中，黑色方块代表下一层的卡片，以它的中心点为基点，上一层可以放四张卡片，以红框表示。</p>

<p>最后得到的堆叠效果，就是下图。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101214.webp" alt="" title="" /></p>

<p>图片替换以后，UI 就基本完成了。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101215.webp" alt="" title="" /></p>

<p>最后，为每张图片加上 click 事件处理函数（点击后移动到卡片槽），游戏的核心逻辑就差不多了。</p>

<p>更详细的源码解读，可以参考<a href="https://juejin.cn/post/7147245442172977189">作者自己的文章</a>，并试玩 <a href="https://chenxch.github.io/xlegex/">Demo</a>。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101216.webp" alt="" title="" /></p>

<p>但是，他的实现还不是最简单的，这里还有一个<a href="https://juejin.cn/post/7143897892531486727">更简单的实现</a>。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101301.webp" alt="" title="" /></p>

<p>这个实现的<a href="https://code.juejin.cn/pen/7143796732931866660">页面源码</a>只有一个脚本，甚至不需要编译。（如果"码上掘金"页面是白屏，点击右上角的"运行"按钮。）</p>

<p>《羊了个羊》就介绍到这里，不过本文还没结束。</p>

<p>我的目的是抛砖引玉，向大家展示<u>简单的 HTML + CSS + JS 代码，就可以做出效果很好的小游戏。</u>下面是其他一些例子。</p>

<p><a href="https://code.juejin.cn/pen/7132404229280366606">《平台跳跃》</a></p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101303.webp" alt="" title="" /></p>

<p><a href="https://code.juejin.cn/pen/7132120696733302822">《消方块》</a></p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101304.webp" alt="" title="" /></p>

<p><a href="https://code.juejin.cn/pen/7131587018592796679">《推箱子》</a></p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101305.webp" alt="" title="" /></p>

<p>大家可以去<a href="https://code.juejin.cn/">"码上掘金"</a>平台，看看它们的代码和效果。</p>

<p>如果你也有这样的作品，或者想尝试一下，现在就有一个好机会。"码上掘金"正在举办<strong>首届全国编程挑战赛</strong>，这是国内少有的前端编程比赛。 </p>

<blockquote>
  <p><strong>["码上掘金"介绍]</strong> 稀土掘金推出的一款面向开发者的在线 Code Playground 服务，无需搭建复杂的开发环境，即可实现代码效果的即时预览、演示和分享。</p>

<p>它类似于国外的 Codepen，这种网站国内好像只有这一家。它主要面向前端开发，但是也支持<a href="https://www.jcode.pub/?languages#/7116418967081582623">20多种后端语言</a>。</p>
</blockquote>

<p><u>如果你有自己的作品（网页游戏、网页动画、UI 特效等等），但苦于无法向社区展示和推广，那么不要错过这个比赛机会</u>，请仔细阅读下面的介绍。</p>

<p>只要参赛，平台会帮忙推广你的作品，并提供丰厚的奖金和奖品。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022102103.webp" alt="" title="" /></p>

<h2>码上掘金编程挑战赛</h2>

<h3>一、活动赛道</h3>

<p>赛题一：<strong>码上游戏</strong>：基于码上掘金开发完成一款创意的 web 互动小游戏，具体游戏内容及形式不限。</p>

<p>赛题二：<strong>码上创意</strong>：可以使用任意第三方开源库/框架，呈现形式包括但不限于可视化的创意动效、动画、UI 效果等，参见 <a href="https://code.juejin.cn/pen/7086673044839596046">Demo</a>。</p>

<p>赛题三：<strong>码上文言文</strong>：需使用码上掘金提供的<a href="https://github.com/xitu/jcode-languages">文言文编程能力</a>，以文言文作为编程语言实现作品，呈现出的作品风格及形式不限，参见 <a href="https://code.juejin.cn/pen/7123010306921463839">Demo</a>。</p>

<p>赛题四：<strong>码上1024</strong>：在码上掘金上实现"稀土掘金"或"1024"相关的效果，参见 <a href="https://code.juejin.cn/pen/7143068746234478632">Demo</a>。</p>

<p>注意，参赛作品必须是原创作品。更多作品灵感参见<a href="https://juejin.cn/pin/topic/7084534887633387555">讨论区</a>。</p>

<h3>二、活动奖品</h3>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022102010.webp" alt="" title="" /></p>

<p>（一）<strong>获奖同学</strong>：赛事奖金，荣誉证书，掘金年度会员，掘金周边盲盒。</p>

<p>获奖作品有可能成为掘金网站开屏页面，获得站内资源位推荐、字节跳动工区宣传位等。</p>

<p>获奖同学有机会获得字节 offer。</p>

<p>（二）<strong>通过审核的参赛选手</strong>：获得稀土掘金月度会员，最新周边盲盒。</p>

<p>（三）<strong>官网报名的所有同学</strong>：参与抽奖，有机会获得 iPhone 14 Pro、Apple Watch 8、Pico4、Airpods Pro 2、掘金盲盒等奖品。</p>

<h3>三、活动时间</h3>

<p>10月12日 ～ 11月30日</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022102009.webp" alt="" title="" /></p>

<p>时间点：</p>

<ul>
<li>10月12日 ～ 11月22日：报名并提交作品。</li>
<li>11月23日 ～ 11月29日：作品评选。</li>
<li>11月30日：赛事颁奖。</li>
</ul>

<h3>四、报名方法</h3>

<p>访问<a href="https://juejin.cn/challenge/1?utm_source=ryf">活动官网</a>，或者扫描下方二维码，了解详情，并报名参加。</p>

<p>（官网报名二维码）</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022102101.webp" alt="" title="" /></p>

<p>报名即可参与抽奖，iPhone 14 Pro、Apple Watch 8、Pico4、Airpods Pro 2、最新盲盒等奖品等你来拿！</p>

<p>如有疑问，微信扫码添加赛事小助理，回复"1024"加入大赛交流群。</p>

<p>（赛事小助理二维码）</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022101308.webp" alt="" title="" /></p>

<h3>五、活动直播</h3>

<p><strong>10月31日（星期一）晚七点</strong>，掘金也会发起一场 <strong>《码上掘金编程挑战赛特别圆桌》</strong> 活动直播，邀请四位不同职业选择的嘉宾，聊聊自己的"码上掘金"之路。</p>

<p>他们有人去了大厂、有人离开大厂、有人创业、有人走上了学术道路，通过他们的分享希望给还在学习和刚进入职场的同学们一些启发。</p>

<p><img src="https://cdn.beekka.com/blogimg/asset/202210/bg2022102102.webp" alt="" title="" /></p>

<p>保存<a href="https://juejin.cn/live/1024sjc?utm_source=ryf">直播链接</a>，或到时<a href="https://juejin.cn/live/1024sjc?utm_source=ryf">点击这里</a>，进入直播间。</p>

<p>（完）</p>

        <div style="color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;"><h3>文档信息</h3>
<ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2022-10-25T08:20:07+08:00">2022年10月25日</abbr></li>

</ul></div>        
        <div style="color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;"></div>
    